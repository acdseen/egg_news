(function(e){function t(t){for(var r,a,i=t[0],u=t[1],c=t[2],l=0,f=[];l<i.length;l++)a=i[l],o[a]&&f.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);p&&p(t);while(f.length)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==o[i]&&(r=!1)}r&&(s.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},o={app:0},s=[];function i(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-15a69f35":"f83ca0e5","chunk-2d0e19c3":"fc60eb0a","chunk-467dce88":"acbec717","chunk-bd28d6ba":"f560ce76"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-15a69f35":1,"chunk-bd28d6ba":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-15a69f35":"f74fee5d","chunk-2d0e19c3":"31d6cfe0","chunk-467dce88":"31d6cfe0","chunk-bd28d6ba":"fbc5b731"}[e]+".css",o=u.p+r,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var c=s[i],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===r||l===o))return t()}var f=document.getElementsByTagName("style");for(i=0;i<f.length;i++){c=f[i],l=c.getAttribute("data-href");if(l===r||l===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.request=r,delete a[e],p.parentNode.removeChild(p),n(s)},p.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(p)}).then(function(){a[e]=0}));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise(function(t,n){r=o[e]=[t,n]});t.push(r[2]=s);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e),c=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");s.type=r,s.request=a,n[1](s)}o[e]=void 0}};var f=setTimeout(function(){c({type:"timeout",target:l})},12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var f=0;f<c.length;f++)t(c[f]);var p=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],s=(n("7c55"),n("2877")),i={},u=Object(s["a"])(i,a,o,!1,null,null,null),c=u.exports,l=(n("7f7f"),n("96cf"),n("1da1")),f=n("8c4f"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline,inline:""}},[n("FormItem",{attrs:{prop:"username"}},[n("Input",{attrs:{type:"text",placeholder:"Username"},model:{value:e.formInline.username,callback:function(t){e.$set(e.formInline,"username",t)},expression:"formInline.username"}},[n("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),n("FormItem",{attrs:{prop:"password"}},[n("Input",{attrs:{type:"password",placeholder:"Password"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,"password",t)},expression:"formInline.password"}},[n("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:function(t){e.signin("formInline")}}},[e._v("登录")]),n("Button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){e.signup("formInline")}}},[e._v("注册")])],1)],1)},d=[],m=n("66df"),h="/api/user",g=function(e){return m["a"].request({url:"".concat(h,"/signin"),data:e,method:"post"})},v=function(e){return m["a"].request({url:"".concat(h,"/signup"),data:e,method:"post"})},b=function(){return m["a"].request({url:"".concat(h,"/signout"),method:"get"})},w=function(){return m["a"].request({url:"".concat(h,"/getUserInfo"),method:"get"})},y={login:g,signup:v,signout:b,getUserInfo:w},k=n("a78e"),I=n.n(k),x=n("1c46"),j=n.n(x),O={data:function(){return{formInline:{username:"",password:""},ruleInline:{username:[{required:!0,message:"请输入用户名！",trigger:"blur"}],password:[{required:!0,message:"请输入密码！",trigger:"blur"},{type:"string",min:6,message:"密码长度不得小于6位！",trigger:"blur"}]}}},methods:{encrypt:function(){var e=j.a.createHash("md5"),t=e.update(this.formInline.password.trim());return t.digest("hex")},signin:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return r=t.encrypt(),e.next=4,y.login({username:t.formInline.username.trim(),password:r});case 4:a=e.sent,0===a.code&&(I.a.set("token",a.data),t.$Message.success({content:"登录成功!",onClose:function(){t.$router.push({name:"Home"})}}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},signup:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return r=t.encrypt(),e.next=4,y.signup({username:t.formInline.username.trim(),password:r});case 4:a=e.sent,0===a.code&&t.$Message.success({content:"注册成功!请登录"});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}}},_=O,C=Object(s["a"])(_,p,d,!1,null,null,null),M=C.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layout"},[n("Layout",[n("Sider",{ref:"side1",attrs:{"hide-trigger":"",collapsible:"","collapsed-width":78},model:{value:e.isCollapsed,callback:function(t){e.isCollapsed=t},expression:"isCollapsed"}},[n("Menu",{class:e.menuitemClasses,attrs:{theme:"dark","active-name":e.activeName,width:"auto"},on:{"on-select":e.changeMenu}},e._l(e.navLists,function(t,r){return n("MenuItem",{key:r,attrs:{name:t.name}},[n("Icon",{attrs:{type:t.icon}}),n("span",[e._v(e._s(t.label))])],1)}))],1),n("Layout",[n("Header",{staticClass:"layout-header-bar",style:{padding:0}},[n("Icon",{class:e.rotateIcon,style:{margin:"0 20px"},attrs:{type:"md-menu",size:"24"},nativeOn:{click:function(t){return e.collapsedSider(t)}}}),n("Dropdown",{staticStyle:{float:"right","margin-right":"50px"},on:{"on-click":e.handle}},[n("a",{attrs:{href:"javascript:void(0)"}},[e._v(e._s(e.userInfo?e.userInfo.staff.username:"--"))]),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{attrs:{name:"out"}},[e._v("退出登录")])],1)],1)],1),n("Content",{style:{margin:"20px",background:"#fff",minHeight:"260px",padding:"20px"}},[n("router-view")],1)],1)],1)],1)},P=[],$=(n("ac4d"),n("8a81"),n("ac6a"),n("be94")),q=n("2f62"),N={data:function(){return{isCollapsed:!0,navLists:[{name:"Home",label:"首页",icon:"ios-home"},{name:"NewsList",label:"新闻列表",icon:"ios-list-box"},{name:"NewsPbulish",label:"新闻发布",icon:"ios-add-circle"}]}},computed:Object($["a"])({},Object(q["c"])(["userInfo"]),{rotateIcon:function(){return["menu-icon",this.isCollapsed?"rotate-icon":""]},menuitemClasses:function(){return["menu-item",this.isCollapsed?"collapsed-menu":""]},activeName:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.navLists[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;if(-1!==this.$route.name.indexOf(o.name))return o.name}}catch(s){t=!0,n=s}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}return""}}),methods:Object($["a"])({},Object(q["b"])(["setUserInfo"]),{collapsedSider:function(){this.$refs.side1.toggleCollapse()},changeMenu:function(e){this.$router.push({name:e})},handle:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("out"!==t){e.next=5;break}return e.next=3,y.signout();case 3:n=e.sent,n.code||this.$router.push({name:"Login"});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}),created:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.getUserInfo();case 2:t=e.sent,t.code||this.setUserInfo(t.data);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},E=N,L=(n("a413"),Object(s["a"])(E,S,P,!1,null,"3461e952",null)),T=L.exports,R=[{path:"/",name:"Login",component:M},{path:"/main",name:"Main",component:T,children:[{path:"home",name:"Home",component:function(e){n.e("chunk-2d0e19c3").then(function(){var t=[n("7abe")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"newslist",name:"NewsList",component:function(e){n.e("chunk-467dce88").then(function(){var t=[n("8bd6")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"newslist/newsedit",name:"NewsListNewsEdit",component:function(e){n.e("chunk-bd28d6ba").then(function(){var t=[n("0fba")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"newspublish",name:"NewsPbulish",component:function(e){n.e("chunk-bd28d6ba").then(function(){var t=[n("0fba")];e.apply(null,t)}.bind(this)).catch(n.oe)}}]},{path:"/preview",name:"Preview",component:function(e){n.e("chunk-15a69f35").then(function(){var t=[n("1f65")];e.apply(null,t)}.bind(this)).catch(n.oe)}}],U=n("323e"),H=n.n(U);n("a5d8");r["default"].use(f["a"]);var B="login",A=new f["a"]({routes:R});A.beforeEach(function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,n,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:H.a.start(),a=I.a.get("token"),a||t.name===B?(a||t.name!==B)&&a&&t.name===B?r({name:"Home"}):r():r({name:B});case 3:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()),A.afterEach(function(e){H.a.done()});var F=A;r["default"].use(q["a"]);var J=new q["a"].Store({state:{userInfo:null},mutations:{setUserInfo:function(e,t){e.userInfo=t}},actions:{}}),D=n("e069"),z=n.n(D);n("dcad"),n("add7");r["default"].use(z.a),r["default"].config.productionTip=!1,new r["default"]({router:F,store:J,render:function(e){return e(c)}}).$mount("#app")},"5c48":function(e,t,n){},"66df":function(e,t,n){"use strict";n("f751"),n("ac6a"),n("456d");var r=n("d4ec"),a=n("bee2"),o=n("e069"),s=n("bc3a"),i=n.n(s),u=n("a78e"),c=n.n(u),l="http://127.0.0.1:7001";i.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",i.a.defaults.headers.get["Content-Type"]="application/x-www-form-urlencoded";var f="token",p=function(){function e(){Object(r["a"])(this,e),this.options={method:"",url:""},this.queue={}}return Object(a["a"])(e,[{key:"destory",value:function(e){delete this.queue[e];var t=Object.keys(this.queue);return t.length}},{key:"interceptors",value:function(e,t){var n=this;e.interceptors.request.use(function(e){return c.a.get(f)&&(e.headers["Authorization"]="Bearer "+c.a.get(f)),e},function(e){return Promise.reject(e)}),e.interceptors.response.use(function(e){var r=e.data;n.destory(t);return r.code&&o["Message"].error(r.error),200!==e.status?(401==e.status?(c.a.set(f,""),window.location.href=window.location.pathnamee+"#/login",o["Message"].error("登录失效")):o["Message"].error("服务器内部错误"),!1):r},function(e){try{var t=JSON.parse(JSON.stringify(e)).response.status;401==t&&(c.a.set(f,""),o["Message"].error("未登录，或登录失效，请登录"),setTimeout(function(){window.location.href=window.location.pathname+"#/login",window.location.reload()},200))}catch(n){o["Message"].error("服务器内部错误")}return Promise.reject(e)})}},{key:"create",value:function(){var e={baseURL:l,timeout:8e3};return i.a.create(e)}},{key:"request",value:function(e){var t=this.create();return this.interceptors(t,e.url),e=Object.assign({},e),this.queue[e.url]=t,t(e)}}]),e}(),d=p,m=new d;t["a"]=m},"7c55":function(e,t,n){"use strict";var r=n("5c48"),a=n.n(r);a.a},a413:function(e,t,n){"use strict";var r=n("b753"),a=n.n(r);a.a},add7:function(e,t,n){},b753:function(e,t,n){}});
//# sourceMappingURL=app.de809585.js.map