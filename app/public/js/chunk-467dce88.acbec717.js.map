{"version":3,"sources":["webpack:///./src/views/news/news-list.vue?51f2","webpack:///src/views/news/news-list.vue","webpack:///./src/views/news/news-list.vue?0628","webpack:///./src/views/news/news-list.vue","webpack:///./src/api/news.js"],"names":["news_listvue_type_template_id_1ea23b0a_render","_vm","this","_h","$createElement","_c","_self","attrs","animated","type","value","on","on-click","changeList","label","name","columns","data","newsListData","staticStyle","margin","overflow","float","total","current","searchForm","pageNum","on-change","changePage","staticRenderFns","news_listvue_type_script_lang_js_","_this","title","key","fixed","width","render","h","params","props","size","click","Object","keys","row","map","localStorage","$router","push","path","query","handle","confirm","on-ok","_onOk","asyncToGenerator","regeneratorRuntime","mark","_callee","res","wrap","_context","prev","next","news","remove","_id","sent","code","$message","success","getData","stop","apply","arguments","pageSize","newsType","created","methods","_getData","_callee2","_context2","list","items","news_news_listvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_libs_api_request__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","ENTITY","axios","request","url","concat","method","create","update","ids","uploadImg"],"mappings":"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","file":"js/chunk-467dce88.acbec717.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Tabs',{attrs:{\"animated\":false,\"type\":\"card\",\"value\":\"1\"},on:{\"on-click\":_vm.changeList}},[_c('TabPane',{attrs:{\"label\":\"公司新闻\",\"name\":'1'}},[_c('Table',{attrs:{\"columns\":_vm.columns,\"data\":_vm.newsListData}})],1),_c('TabPane',{attrs:{\"label\":\"行业新闻\",\"name\":'0'}},[_c('Table',{attrs:{\"columns\":_vm.columns,\"data\":_vm.newsListData}})],1)],1),_c('div',{staticStyle:{\"margin\":\"10px\",\"overflow\":\"hidden\"}},[_c('div',{staticStyle:{\"float\":\"right\"}},[_c('Page',{attrs:{\"total\":_vm.total,\"current\":_vm.searchForm.pageNum},on:{\"on-change\":_vm.changePage}})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <Tabs :animated=\"false\"\r\n          type=\"card\"\r\n          value=\"1\"\r\n          @on-click=\"changeList\">\r\n      <TabPane label=\"公司新闻\"\r\n               :name=\"'1'\">\r\n        <Table :columns=\"columns\"\r\n               :data=\"newsListData\"></Table>\r\n      </TabPane>\r\n      <TabPane label=\"行业新闻\"\r\n               :name=\"'0'\">\r\n        <Table :columns=\"columns\"\r\n               :data=\"newsListData\"></Table>\r\n      </TabPane>\r\n    </Tabs>\r\n    <div style=\"margin: 10px;overflow: hidden\">\r\n      <div style=\"float: right;\">\r\n        <Page :total=\"total\"\r\n              :current=\"searchForm.pageNum\"\r\n              @on-change=\"changePage\"></Page>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport server from '@/api/news';\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      total: 0,\r\n      columns: [\r\n        {\r\n          title: \"新闻标题\",\r\n          key: \"articleTitle\"\r\n        },\r\n        {\r\n          title: \"新闻作者\",\r\n          key: \"newsAutor\"\r\n        },\r\n        {\r\n          title: \"发布时间\",\r\n          key: \"publishTime\"\r\n        },\r\n        {\r\n          title: '操作',\r\n          key: 'action',\r\n          fixed: 'right',\r\n          width: 160,\r\n          render: (h, params) => {\r\n            return h('div', [\r\n              h('Button', {\r\n                props: {\r\n                  type: 'text',\r\n                  size: 'small'\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    Object.keys(params.row).map(key => {\r\n                      localStorage[key] = params.row[key];\r\n                    })\r\n                    this.$router.push({ path: 'newslist/newsedit', query: { handle: 'edit' } });\r\n                  }\r\n                }\r\n              }, '修改'),\r\n              h('Poptip', {\r\n                props: {\r\n                  confirm: true,\r\n                  title: '确认删除吗？',\r\n                },\r\n                on: {\r\n                  'on-ok': async () => {\r\n                    const res = await server.remove(params.row._id);\r\n                    if (!res.code) {\r\n                      this.$message.success('删除成功！');\r\n                      this.getData();\r\n                    }\r\n                  }\r\n                },\r\n              },\r\n                [\r\n                  h('Button', {\r\n                    props: {\r\n                      type: 'text',\r\n                      size: 'small'\r\n                    }\r\n                  }, '删除')\r\n                ]),\r\n            ]);\r\n          }\r\n        }\r\n      ],\r\n      newsListData: [],\r\n      searchForm: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        data: {\r\n          newsType: 1, // 新闻类型 1：公司新闻 0：行业新闻\r\n        }\r\n      }\r\n    };\r\n  },\r\n  created () {\r\n    this.getData();\r\n  },\r\n  methods: {\r\n    async getData () {\r\n      let res = await server.list(this.searchForm);\r\n      if (!res.code) {\r\n        this.newsListData = res.data.items;\r\n        this.total = res.data.total;\r\n      }\r\n    },\r\n    // 切换新闻类型\r\n    changeList (newsType) {\r\n      this.searchForm.pageNum = 1;\r\n      this.searchForm.data.newsType = newsType;\r\n      this.getData();\r\n    },\r\n    // 分页\r\n    changePage (pageNum) {\r\n      this.searchForm.pageNum = pageNum;\r\n      this.getData();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./news-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./news-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./news-list.vue?vue&type=template&id=1ea23b0a&\"\nimport script from \"./news-list.vue?vue&type=script&lang=js&\"\nexport * from \"./news-list.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import axios from '@/libs/api.request'\r\n\r\nconst ENTITY = '/api/news'\r\nconst list = data => {\r\n  return axios.request({\r\n    url: `${ENTITY}`,\r\n    params: data,\r\n    method: 'get'\r\n  })\r\n}\r\nconst create = data => {\r\n  return axios.request({\r\n    url: `${ENTITY}`,\r\n    data,\r\n    method: 'post'\r\n  })\r\n}\r\nconst update = data => {\r\n  return axios.request({\r\n    url: `${ENTITY}/${data._id}`,\r\n    data,\r\n    method: 'put'\r\n  })\r\n}\r\nconst remove = ids => {\r\n  if (typeof ids === 'string') {\r\n    ids = [ids]\r\n  }\r\n  return axios.request({\r\n    url: `${ENTITY}/${ids[0]}`,\r\n    data: { ids },\r\n    method: 'delete'\r\n  })\r\n}\r\nconst uploadImg = data => {\r\n  return axios.request({\r\n    url: `/api/uploadimg`,\r\n    data,\r\n    method: 'post'\r\n  })\r\n}\r\n\r\nexport default {\r\n  list,\r\n  create,\r\n  update,\r\n  remove,\r\n  uploadImg\r\n}\r\n"],"sourceRoot":""}